### 제목 후보

- cqrs 를 꼭 해야하는가?
- 왜 cqrs 를 많은 사람들이 하지 않을까?
- 왜 cqrs 를 두려워하는 것일까?
- cqrs 에 대한 나의 생각
- 나는 왜 cqrs 를 찬양하는가
- 나는 왜 CQRS 를 찬양하는가
- 나는 cqrs 를 이렇게 정의내리고 이렇게 생각한다

# 주의

- 모든 내용은 나만의 생각이고 소설이다

# 고민의 시작

- 개발자들 모임에서 이런 이야기를 들었다
  - `지금 연차에 cqrs 를 고민하지 않아도 된다`, `한국에 cqrs 를 하는 기업이 얼마나 될 것인가`
  - 이 대화 주제를 던진 개발자분의 악의적인 의도는 전혀 없었다.
  - 텍스트로 써서 그렇지 커리어에 더 올바른 방향으로 하나의 제안을 해주신 것
- 이런 이야기를 듣고 곰곰히 생각해보고 여러 사람들과 이야기를 나누었고 나는 다음과 같은 결론에 이르렀다
  - CQRS 는 Spring 진영에서 사용되는 Layered Architecture 만큼이나, Repository 라는 용어 만큼이나 일반적이고 자연스럽게 받아들여져야 한다고 믿는다.
- 그리고 이 글은 내가 세운 하나의 가설으로 부터 시작한다.
  - 가설 1. 사람들은 cqrs 에 대해서 하나의 복잡한 '아키텍처'라고 생각한다.
    - greg young 의 블로그
  - 가설 2. 사람들은 cqrs 을 성능과 결부시킨다
    - cqrs 의 목적은 성능이 아닌 도메인을 보호하는 여러 방법 중 하나
    - domain 이 중요한 이유
  - 가설 3. 사람들은 cqrs 에 특정 구현법만이 cqrs 라고 생각한다.
    - cqrs 구현 단계 2가지
      1. 단일 데이터소스: read model write model 분리
      2. 다중 데이터소스: read model 에 write model 전파
    - YAGNI, KISS, DRY 원칙을 들먹인다
    - 검색 엔진
    - 물론 다중 데이터소스에 eda 를 적용하는것은 위 원칙들을 위배함

# 나는 cqrs 를 조금 더 가볍게 봐야 한다고 생각한다.

- 우선 cqrs 를 어려운 아키텍처라고 생각한다는 것에서부터 시작해본다
- 완수님 샤라웃
  - 이 고민을 완수님께 전했을 때, 몇마디와 함께 정말 심플하게 답변이 왔다 (리치 히키의 클로저)
- 리치 히키는 쉽다와 단순하다는 것을 분리한다
  - 쉽다와 단순하다는 다르다
  - 복잡한 아키텍처라도 쉬울 수 있고

# 도메인과 비즈니스는 무엇인가

- 도메인은 문제 해결 영역
- 비즈니스는 우리가 해결해야 하는 문제들의 집합체
- 비즈니스가 곧 도메인
- 비즈니스는 일반적으로 우리가 제어하기 쉽지 않다
  - 우리가 제어하는 영역도 아니다, 제어해서는 안된다
  - 올바른 비즈니스를 할 수 있도록 그들을 도와야한다
- 그럼 우리게 제어할 수 있는 것은 도메인이다.
- 도메인을 작게 유지해야 하는 이유는
  - 우리는 도메인을 급변하는 비즈니스에 대응하기 위해 충분히 작게 유지하는 노력이 아닐까 싶다
    - 혹은 도메인은 우리의 문제 해결 영역이다. 문제 해결 영역을 충분히 작고 단순하게 만드는 노력이 멋지고 가치있는 일이라고 믿는다
  - 그러기 위한 몇가지 노력들이 있다.
    - infrastructure layer 와 domain layer 를 분리
    - hexagonal
    - cqrs 가 아닐까 싶다
- cqrs 는 command 와 query 를 분리함으로 이 문제를 해결한다
  - 사실상 우리가 구현하는 비즈니스의 시작은 domain 의 상태를 변경하는 command 로 부터 시작된다.
  - command side 를 잘 다루고 가꾸어야 유지보수가 뛰어나고 확장성이 생긴다.
  - 복잡한 조회의 요구사항을 만족시키기 위해 query side 의 로직이 도메인에 침투하게 된다.

# cqrs 는 정답이 없다고 생각합니다. 마치 DDD, TDD 이야기하는 것처럼 하나의 개념이라는 생각에 대해서는 어떻게 생각하시나요?

- cqrs 는 정답이 없다고 생각합니다. 마치 DDD, TDD 이야기하는 것처럼 하나의 개념이라는 생각에 대해서는 어떻게 생각하시나요?

# 하지만 주의하고 명심하자

- 트위터 마이크로서비스 사태
- 소프트웨어를 예술의 영역으로 볼 것인가, 공학의 영역으로 볼 것인가
- 팀원들의 가치 align

# 맺음말

- 윤지님 샤라웃
- 사실 CQRS 용어 자체는 중요하지 않다. 도메인을 지키는 행위 자체가 중요하다고 본다. 하지만 CQRS 는 도메인을 지키는 행위라는 인터페이스의 구현체다.
  - 어떠한 예술적, 추상적 개념을 설명하는 공학적이며 실질적인 방법이다
- github 홍보
  - 여기서 토론을 해볼 예정이다
