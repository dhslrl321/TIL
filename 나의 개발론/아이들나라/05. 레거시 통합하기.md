# 3. 레거시 통합하기

- 레거시 시스템은 중요합니다.
  - 지금까지 서비스를 성장시키기 위해 지탱하는 핵심 코어 기술들과 로직들이 존재하고 이들 덕분에 우리 소프트웨어는 더 나은 방향으로 나아갈 수 있습니다
- 레거시 시스템을 제거할 수 없다면 이들과 잘 지내야 합니다

## 레거시의 지식이 경계 내부로 스며들지 않도록

- 레거시 시스템은 여러 경계에 걸쳐 다양한 이해관계자들과 상호작용하는 살아있는 코드입니다
- 레거시 시스템이 가지고 있는 낡은 지식을 경계 내부로 끌여들이는 순간 지옥이 펼쳐집니다
  - 레거시 시스템의 지식을 경계 내부로 끌어들이지 않도록 주의해야 합니다
- 어떻게 할까요?
  - 통합 레이어를 추가합니다
  - 통합 레이어는 정상 플로우가 끝나면 통합이라는 일을 수행하도록 합니다
  - application layer 에서는 통합이라는 facade 를 호출하기만 하면 되는 것이죠

# 통합 레이어의 핵심

- 통합레이어의 핵심은 facade 입니다
  - 통합을 해야한다는 command 만 facade 에게 전달하면 이후의 통합 방법을 숨기는 것이죠
  -

# 통합 레이어의 구현

- 통합 레이어는 facade 뒤에서 구현됩니다
  - sync 통합
    - db
    - http/rest
  - async
    - queue
    - tx outbox (dms)

# 통합 레이어에서 고려해야할 문제

- 네트워크는 신뢰할 수 없다
- 언제든지 지연이 발생할 수 있고, 많을 수도 있다
