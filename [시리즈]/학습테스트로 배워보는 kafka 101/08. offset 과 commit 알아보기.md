[학습 테스트로 배워보는 kafka] 6. 학습 테스트로 offset 과 commit 알아보기

지난시간 우리는 기본적인 kafka consumer 의 사용법에 대해서 알아보았다.

이번 시간에는 kafka consumer 의 핵심 개념인 offset 에 대해서 알아보자

# Kafka 의 Offset

카프카를 이해하기 위해 가장 적절한 단어는 공식 문서에서도 소개되었듯이 **로그 시스템** 이다.

consumer 파트에서도 설명했듯이 카프카는 메시지를 소비하면 해당 **메시지를 삭제하지 않는다.**

단지 특정한 컨슈머가 읽었던 위치를 알고있고 그 위치 정보를 토대로 다음에 읽어갈 이벤트 로그 위치를 관리할 뿐이다

이러한 offset 덕분에 문제가 발생하면 언제든 특정 시점의 이벤트 로그를 다시 읽을 수 있고 누구든 특정 시점의 이벤트 로그를 다시 읽어갈 수 있다.

---

앞선 여러 시간에 걸쳐서 계속해서 강조해온 중요한 내용이 있다.

#### 카프카는 애플리케이션에서 발생하는 이벤트에 대한 로그 시스템이다.

로그는 시스템 내에서 일어난 **일련의 사건들**이다.

우리는 일반적으로 발생한 로그들 사이에 어떤 새로운 로그를 추가하려하지 않는다. **단지 로그는 계속해서 쌓일 뿐이다.**

또한 우리는 **특정 시점에 발생한 로그들을 언제든 다시 조회**할 수 있다.

카프카는 로그의 **append only** 와 **seeking by offset** 특성을 따르는 `log based architecture` 를 지향한다.

앞선 consumer 파트에서도 설명했듯이 카프카는 메시지를 소비하면, 다른 MQ 와 달리 메시지를 삭제(pop) 하지 않는다.

그럼 어떻게 consumer 는 메시지를 **중복 없이** 소비할까?

정답은 바로 offset 과 commit 에 있다.

# offset

kafka 에서 offset 은 토픽에 존재하는 파티션의 특정 메시지(이벤트 로그)의 위치(position)다.
