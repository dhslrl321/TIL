[React-redux] ë°©ëª…ë¡ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ë³´ë©° ë°°ìš°ëŠ” ë¦¬ë•ìŠ¤

ì˜¤ëŠ˜ì€ React ì—ì„œ Redux ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ë„ë¡ í•˜ê² ë‹¤.

ê·¸ëŸ¬ê¸° ìœ„í•´ì„œëŠ” ìš°ì„  2ê°€ì§€ ê¸°ìˆ ì´ ì„ í–‰ë˜ì–´ì•¼ í•œë‹¤.

1. [Reactì™€ React-Hooks](https://wonit.tistory.com/category/ğŸ¦ %20ìë°”ìŠ¤í¬ë¦½íŠ¸/--%20React.js)
2. [Redux ì˜ ê¸°ë³¸ Concept](https://wonit.tistory.com/344?category=822790)

ìœ„ ë‚´ìš©ë“¤ì„ ëª¨ë¥¸ë‹¤ë©´ ì¡°ê¸ˆ í˜ë“¤ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ ìœ„ ë§í¬ì—ì„œ í™•ì¸í•˜ëŠ” ê²ƒë„ ì¢‹ì€ ë°©ë²•ì¸ ê²ƒ ê°™ë‹¤.

### ëª©ì°¨

- reduxì™€ react-reduxì˜ ì°¨ì´
- redux ì˜ ê¸°ë³¸ ê°œë…
  - êµ¬ì„± ìš”ì†Œ
  - Provider
- react-redux ë¡œ todo list ë§Œë“¤ê¸°
  - í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°
  - ì˜ì¡´ì„± ì¶”ê°€
    - styled-components
    - react-redux
  - UI ì‘ì—…í•˜ê¸°
    - í™ˆ í™”ë©´ ë§Œë“¤ê¸°
  - ë¦¬ë•ìŠ¤ ì‘ì—…í•˜ê¸°
    - action type ë§Œë“¤ê¸°
    - action creator ë§Œë“¤ê¸°
    - reducer ë§Œë“¤ê¸°
    - store ì¶”ê°€í•˜ê¸°

# reduxì™€ react-reduxì˜ ì°¨ì´

ì˜ ì•Œë‹¤ì‹¶ì´ ë¦¬ë•ìŠ¤ëŠ” Vue, Angular, Ember, Vanilla JS ì™€ëŠ” ë³„ê°œë¡œ ëŒì•„ê°€ëŠ” ë…ë¦½ì ì¸ Javascript ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.

ë¦¬ë•ìŠ¤ëŠ” ë‹¤ë¥¸ í”„ë ˆì„ì›Œí¬ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì“¸ ë•ŒëŠ” UI ë°”ì¸ë”©ì„ í•´ì•¼ë˜ëŠ”ë°, ê·¸ê²Œ ë°”ë¡œ Reactì—ì„œëŠ” React-Redux ë¼ê³  ë¶ˆë¦°ë‹¤.

react-redux, [ê³µì‹ í™ˆí˜ì´ì§€](https://react-redux.js.org) ì—ì„œ ìì„¸í•œ ì»¨ì…‰ì„ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë‹ˆ í™•ì¸í•˜ëŠ” ê²ƒë„ ì¢‹ì€ ë°©ë²•ì¸ ê²ƒ ê°™ë‹¤.

# reduxì˜ ê¸°ë³¸ ê°œë…

redux ì˜ ê¸°ë³¸ ê°œë…ê³¼ êµ¬ì„±ìš”ì†Œì— ëŒ€í•´ì„œëŠ” [ì§€ë‚œ ì‹œê°„](https://wonit.tistory.com/344?category=822790) ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ ê°„ë‹¨í•˜ê²Œ ë˜ì§šê³  ë„˜ì–´ê°€ë³´ì.

## êµ¬ì„± ìš”ì†Œ

- Provider
- action
  - ìˆœìˆ˜ js ê°ì²´
    - action type
    - action payload
- action Creator
  - action ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
- Dispatch
  - action ì„ ë¦¬ë“€ì„œì—ê²Œ ì „ë‹¬í•œë‹¤
- Reducer
  - action ì´ (ìƒˆë¡œìš´ stateë¥¼ ë°˜í™˜)
- Store
  - ê´€ë¦¬í•˜ë ¤ëŠ” stateë¥¼ ì €ì¥í•˜ëŠ” ê³³

## Provider

Provider ëŠ” ë¦¬ë•ìŠ¤ì˜ ê°€ì¥ ê¸°ë³¸ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.

ìš°ë¦¬ëŠ” Redux ë¥¼ state ë¥¼ ê´€ë¦¬í•˜ê³  **Global í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´**ì„œ ì‚¬ìš©í•˜ëŠ”ë°, ê·¸ëŸ¬ê¸° ìœ„í•´ì„œëŠ” ê°€ì¥ ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ì— Provider ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

ë³´í†µ create-react-app ì„ í†µí•´ì„œ ë¦¬ì•¡íŠ¸ ì•±ì„ ë§Œë“¤ê²Œ ë˜ë©´ App ì»´í¬ë„ŒíŠ¸ê°€ ê°€ì¥ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ê°€ ëœë‹¤.
App ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì´ storeë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•´ì„œ `<Provider />` ë¡œ wrapping í•´ì•¼ í•œë‹¤.

```js
import React from "react";
import ReactDOM from "react-dom";

import { Provider } from "react-redux";
import store from "./store";

import App from "./App";

const rootElement = document.getElementById("root");
ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  rootElement
);
```

ë³´í†µ React ì—ì„œëŠ” `App.js`, Next.js ì—ì„œëŠ” `_app.js` ì—ì„œ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.

ì´ì œ ì‹¤ì „ìœ¼ë¡œ ë“¤ì–´ê°€ todo list ë¥¼ ë§Œë“¤ì–´ë³´ì

# react-redux ë¡œ todo list ë§Œë“¤ê¸°

Todo List ë¥¼ ë§Œë“¤ ê²ƒì¸ë° ì•„ë§ˆ ê²°ê³¼ë¬¼ì€ ë‹¤ìŒê³¼ ê°™ì´ ìƒê²¼ì„ ê²ƒì´ë‹¤.

[##_Image|kage@6HzQX/btq6Q6BafSW/FauawEzkjtxC8i4WlmIzH0/img.png|alignCenter|data-origin-width="878" data-origin-height="1072" width="608" height="742" data-ke-mobilestyle="widthOrigin"|||_##]

ìˆœì„œëŠ” ì•ì„  ëª©ì°¨ì—ì„œ ì´ì•¼ê¸° í–ˆë˜ ê²ƒ ì²˜ëŸ¼ ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ê°œë°œ í•œë‹¤.

1. í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°
2. ì˜ì¡´ì„± ì¶”ê°€
3. ë¦¬ë•ìŠ¤ ì‘ì—…í•˜ê¸°
4. UI ì‘ì—…í•˜ê¸°

# í”„ë¡œì íŠ¸ ë§Œë“¤ê¸° & ì˜ì¡´ì„± ì¶”ê°€

**CRA** ë¥¼ ì´ìš©í•´ì„œ ê°„ë‹¨í•œ ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ë³´ì.

```bash
$ create-react-app redux-todo

$ npx create-react-app redux-todo
```

ê·¸ë¦¬ê³  ì˜ì¡´ì„±ë“¤ì„ ì¶”ê°€í•´ë³´ì.
ê°„ë‹¨í•˜ê²Œ **reduxì™€ styled-component** ë¥¼ ì¶”ê°€í•´ë³´ì.

```bash
$ npm install -y styled-components

$ npm install -y redux
```

ì´ë ‡ê²Œ ê¹Œì§€ í–ˆë‹¤ë©´ `package.json` ì— ì˜ì¡´ì„±ì´ ì˜ ë“¤ì–´ì™”ëŠ”ì§€ í™•ì¸í•˜ê³  ë£¨íŠ¸ í´ë”ì—ì„œ **App.jsì™€ index.js** ë§Œ ë‚¨ê¸°ê³  ë‚˜ë¨¸ì§€ëŠ” ì‚­ì œí•œ ë’¤, í•„ìš”í•˜ì§€ ì•Šì€ ì½”ë“œë“¤ì„ ì§€ì›Œ ì‹¤í–‰ì´ ë˜ëŠ” ê²ƒ ê¹Œì§€ í™•ì¸í•˜ì!

[##_Image|kage@lt4Xp/btq6TzvwQd9/qYmpm2NzkFvlwUzghVpiY0/img.png|alignCenter|data-origin-width="204" data-origin-height="219" data-ke-mobilestyle="widthOrigin"|||_##]

# ë¦¬ë•ìŠ¤ ì‘ì—…í•˜ê¸°

ì´ë²ˆ ê¸€ì˜ í•µì‹¬ì¸ **ë¦¬ë•ìŠ¤ ì‘ì—…í•˜ê¸°** ë¶€ë¶„ì´ë‹¤.

ë¦¬ë•ìŠ¤ ì‘ì—…ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” 3ê°œì˜ js íŒŒì¼ì´ í•„ìš”í•˜ë‹¤.

- **actions.js**
  - action ìƒì„±ì„ í•˜ê³  í•´ë‹¹ action ì´ ì–´ë–¤ ì¼ì„ ìˆ˜í–‰í• ì§€ ì§€ì •í•œë‹¤.
- **reducer.js**
  - action ì„ ì‹¤í–‰ì‹œí‚¬ reducer
  - action ê°ì²´ë¥¼ ë°›ì•„ state ë¥¼ ë³€ê²½ì‹œí‚¨ë‹¤.
- **store.js**
  - reducer ë¡œ global store ë¥¼ ë§Œë“¤ redux store

`commons` ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•˜ê³  ë‹¤ìŒ 3ê°œì˜ íŒŒì¼ì„ ê°ê° ì‘ì„±í•˜ë„ë¡ í•˜ì.

[##_Image|kage@bmRdzp/btq6VrYnuWq/OWUuP0FcioVqvOF1JfMmDK/img.png|alignCenter|data-origin-width="178" data-origin-height="133" data-ke-mobilestyle="widthOrigin"|||_##]

### actions.js

```js
export const ADD = "ADD_TODO";
export const DELETE = "DELETE_TODO";

let id = 1;

export const add_todo = (todo) => {
  return {
    type: ADD,
    todo: {
      id: id++,
      title: todo.title,
      isComplete: todo.isComplete,
    },
  };
};

export const delete_todo = (id) => {
  return {
    type: DELETE,
    id,
  };
};
```

### reducer.js

```js
import { ADD, DELETE } from "./actions";

const initialState = {
  todos: [],
};

export const reducer = (state = initialState, action) => {
  if (action.type === ADD) {
    return {
      // ë§Œì•½ ë‹¤ë¥¸ state ê°€ ì¡´ì¬í•œë‹¤ë©´ ì „ê°œ ì—°ì‚° ...state ë¥¼ í•´ì•¼í•¨
      // í•˜ì§€ë§Œ í˜„ì¬ state ì—ëŠ” todos í•˜ë‚˜ ë¿ì´ë¼ todos ë§Œ ë°˜í™˜í•˜ë©´ ë¨
      todos: [...state.todos, action.todo],
    };
  } else if (action.type === DELETE) {
    return {
      todos: [...state.todos.filter((todo) => todo.id !== action.id)],
    };
  } else {
    return state;
  }
};
```

### store.js

```js
import { createStore } from "redux";
import { reducer } from "./reducer";

const store = createStore(reducer);

export default store;
```

# UI ì‘ì—…í•˜ê¸°

UI ëŠ” 4ê°œì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ìš©í•´ì„œ êµ¬ì„±í•  ê²ƒì´ê³  style ì„ ì•„ì£¼ ê°„ë‹¨í•˜ê²Œ ì ìš©í•˜ë ¤ í•œë‹¤. ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ëŠ” ê³ ìœ í•œ styleã„´.js íŒŒì¼ì„ ê°–ê²Œ ëœë‹¤.

1. App.js
2. InputForm.js
3. TodoItem.js
4. TodoList.js

## App.js & App.styles.js

```js
// App.js
import React from "react";
import * as S from "./App.styles";

import InputForm from "./components/InputForm";
import TodoList from "./components/TodoList";

function App() {
  return (
    <S.Container>
      <S.Wrapper>
        <h1>Redux ë¡œ ë°°ìš°ëŠ” Todo List</h1>
        <InputForm />
        <TodoList />
      </S.Wrapper>
    </S.Container>
  );
}

export default App;

// App.styles.js
import styled from "styled-components";

export const Container = styled.div`
  width: 100vw;
  height: 200vh;

  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;

  background: #e9ecef;

  input {
    appearance: none;
    outline-style: none;
    border: none;
  }
`;

export const Wrapper = styled.div`
  margin-top: 300px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: flex-start;
`;
```

## InputForm.js & InputForm.styles.js

```js
// InputForm.js
import React, { useState } from "react";
import { useDispatch } from "react-redux";

import * as S from "./InputForm.styles";
import { add_todo } from "../commons/actions";

const InputForm = () => {
  const dispatch = useDispatch();

  const [text, setText] = useState("");

  const handleChange = (e) => {
    const { value } = e.target;

    setText(value);
  };

  const handleClick = () => {
    const todo = {
      title: text,
      isComplete: false,
    };

    dispatch(add_todo(todo));
    setText("");
  };

  const handleKeyPress = (e) => {
    if (e.key === "Enter") {
      handleClick();
    }
  };

  return (
    <S.Container>
      <S.InputBox
        type="text"
        placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”!!"
        onChange={handleChange}
        value={text}
        onKeyDown={handleKeyPress}
      />
      <S.Button onClick={handleClick}>ì¶”ê°€ í•˜ê¸°</S.Button>
    </S.Container>
  );
};

export default InputForm;

// InputForm.styles.js
import styled from "styled-components";

export const Container = styled.div`
  display: flex;
  justify-content: center;
  align-items: center;
`;

export const InputBox = styled.input`
  width: 295px;
  height: 40px;
  margin: 10px 5px;

  border-radius: 15px;
  font-size: 1.2rem;

  background: white;
  padding: 5px 25px;
  box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.34);
`;

export const Button = styled.button`
  width: 100px;
  height: 50px;

  font-size: 1.2rem;

  background: white;

  border: none;
  border-radius: 15px;

  color: #20c997;

  box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.34);

  cursor: pointer;
`;
```

## TodoItem.js & TodoItem.styles.js

```js
// TodoItem.js
import React from "react";

import { useDispatch } from "react-redux";

import * as S from "./TodoItem.styles";
import { delete_todo } from "../commons/actions";

const TodoItem = ({ todo }) => {
  const dispatch = useDispatch();

  const { id, title, isComplete } = todo;

  const handleClick = () => {
    dispatch(delete_todo(id));
  };

  return (
    <S.Container>
      <S.TextColumn>
        <div>
          <S.Text>{title}</S.Text>
        </div>
        <S.X onClick={handleClick}>{isComplete || "X"}</S.X>
      </S.TextColumn>
    </S.Container>
  );
};

export default TodoItem;

// TodoItem.styles.js
import styled from "styled-components";

export const Container = styled.div`
  margin: 10px 10px;
  padding: 10px 10px;

  display: flex;
  justify-content: flex-start;
  align-items: center;

  border-radius: 4px;
`;

export const TextColumn = styled.div`
  width: 100%;

  display: flex;
  justify-content: space-between;
  align-items: center;
`;

export const Text = styled.span`
  margin: 0 8px;
`;

export const X = styled.button`
  color: red;
  border: none;
  background: white;

  font-size: 1rem;

  cursor: pointer;
`;
```

## TodoList.js & TodoList.styles.js

```js
// TodoList.js
import React from "react";

import * as S from "./TodoList.styles.js";

import TodoItem from "./TodoItem.js";
import { useSelector } from "react-redux";

const TodoList = () => {
  const todos = useSelector((state) => state.todos);

  return (
    <S.Container>
      {todos.map((todo) => (
        <TodoItem key={todo.id} todo={todo} />
      ))}
    </S.Container>
  );
};

export default TodoList;

// TodoList.styles.js
import styled from "styled-components";

export const Container = styled.div`
  width: 400px;
  padding: 30px;

  display: flex;
  flex-direction: column;

  background: white;

  border-radius: 15px;
  box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.34);
`;
```

#### ì „ì²´ ì‹¤ìŠµ ì½”ë“œëŠ” [github](https://github.com/dhslrl321/TIL/tree/master/Front-End/Javascript/Redux/redux-todo) ì— ì˜¬ë¼ê°€ ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤!
