# 스프링 시큐리티의 큰 그림

- 큰 순서
  1. `DelegatingFilterProxy` 를 만듦
  2. 메인 필터 체인에 추가
  3. SecurityFilterChain 그룹을 등록
- 프록시를 만드는 이유는 사용자 인가 없이도 공개될 정보들을 위해서
  - 만약 프록시를 안 두면 모든 요청이 메인 필터를 타고 들어가야 함
  - 프록시를 두면 필터를 무시(ignore) 하고 통과
  - 선택적으로 필터 체인을 선택함 : `WebSecurityConfigurerAdapter`
- Security Filter 들
  - `HeaderWriterFilter` : Http 헤더를 검사
  - `CorsFilter` : 허가된 사이트의 요청인가?
  - `CsrfFilter` : 내가 보낸 리소스의 요청인가?
  - `LogoutFilter` : 로그이웃을 행하는건가?
  - `UsernamePasswordAuthenticaationFilter` : username / password 로 로그인을 하려고 하는가?
  - `ConcurrentSessionFilter` : 여러 곳에서 로그인 하는 것을 허용할 것인가?
  - `BearerTokenAuthenticationFilter` : Authorization 헤더에 Bearer 토큰이 존재하는가?
  - `BasicAuthenticationFilter` : 요청한 Request 이력을 캐시에 보관
  - `RememberMeAuthenticationFilter` : 아직 Authentication 인증이 되지 않은 경우 RememberMe 쿠키를 검사해서 인증
  - `AnonymousAuthenticationFilter` : 인증이 안되었으면 너는 Anonymous 사용자
  - `SessionmanagementFilter` : 서버에 지정한 세션 정책을 검사
  - 이러한 필터들의 순서는 **매우 중요**하므로 기본 순서가 정해져있음
