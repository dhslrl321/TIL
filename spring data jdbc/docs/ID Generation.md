# ID Generation

- 엔티티를 식별하기 위해서 Spring Data 의 `@Id` 를 꼭 써줘야 함

스프링 데이터 JDBC는 집계 루트에 @Version으로 주석이 달린 숫자 속성을 통해 낙관적인 잠금을 지원합니다. Spring Data JDBC가 그러한 버전 속성으로 집계를 저장할 때마다 두 가지 일이 발생합니다: 집계 루트의 업데이트 문에는 데이터베이스에 저장된 버전이 실제로 변경되지 않았는지 확인하는 where 절이 포함됩니다. 그렇지 않으면 OptimisticLockingFailureException이 던져질 것이다. 또한 버전 속성은 엔티티와 데이터베이스 모두에서 증가하므로 동시 작업은 위에서 설명한 대로 변경 사항을 알아차리고 해당되는 경우 OptimisticLockingFailureException을 던집니다.

이 프로세스는 새로운 집계 삽입에도 적용되며, null 또는 0 버전은 새 인스턴스를 나타내고 증가된 인스턴스는 나중에 인스턴스를 더 이상 새롭지 않은 것으로 표시하여 UUID가 사용될 때 객체 구성 중에 ID가 생성되는 경우와 함께 이 작업을 잘 작동합니다.

삭제하는 동안 버전 검사도 적용되지만 버전은 증가하지 않습니다.
